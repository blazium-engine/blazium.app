{{/* Template for the page selector */}}

{{define "page-selector"}}
  {{$max := .Max}}
  {{if gt $max 1}}
    {{$page := .Page}}
    {{$url := .Url}}

    <section id="page-selector" class="no-select">
    {{if ne $page 1}}
      <a class="secondary-btn" href="{{$url}}?p={{sub $page 1}}"><i class="fa-solid fa-angle-left"></i></a>
    {{end}}

    {{range $value := (seq $max)}}
      {{$back := (sub $page 2)}}
      {{$front := (add $page 2)}}

      {{if (or (and (eq $value $back) (ne $back 1)) (and (eq $value $front) (ne $front $max)))}}
        <i class="fa-solid fa-ellipsis"></i>
      {{else if (or (eq $value 1) (and (gt $value $back) (lt $value $front)) (eq $value $max))}}
        <a class="secondary-btn{{if eq $value $page}} selected{{end}}" href="{{$url}}?p={{$value}}">{{$value}}</a>
      {{end}}
    {{end}}

    {{if ne $page $max}}
      <a class="secondary-btn" href="{{$url}}?p={{add $page 1}}"><i class="fa-solid fa-angle-right"></i></a>
    {{end}}
    </section>
  {{end}}
{{end}}